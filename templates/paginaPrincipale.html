<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bookshelf</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN6jIeHz" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    body {
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      background-color: #f5f5f5;
    }
    
    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 50px;
    }

    td {
      width: 200px;
      height: 300px;
      background-color: #ffffff;
      border: 2px solid #000;
      border-radius: 15px;
      box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
    }

    body {
      background-color: rgb(231, 229, 229);
    }

    .no-style {
      width: auto;
      height: auto;
      background-color: transparent;
      border: none;
      box-shadow: none;
      border-radius: 0;
    }
  </style>
</head>

<body>
  <header>
    <hr>
    <div>
      <h2 style="text-align: center; font-weight: bold;"><i class="fa-solid fa-book-open"></i> BOOKSHELF <i class="fa-solid fa-book-open"></i></h2>
      <p style="font-size: 10px; text-align: center;">By: Umar Shabbir, Akalpreet Singh and Davide Cirelli</p>
    </div>
    <hr>
  </header>

  <div class="center-table">
    <table>
      <tr>
        <td>
          <!-- Libro 1 -->
          <div style="text-align: center;">
            <div style="width: 100%;">
              <button class="btn open-modal-btn" data-bs-toggle="modal" data-bs-target="#exampleModal" style="width: 100%; padding: 0; border: none; cursor: default;">
                <div style="height: 500px; width: 100%; padding: 0; border: none; cursor: default;">
                  <img src="http://localhost:5000/static/img/HarryPotterFilosofale1.jpg" alt="Harry Potter" style="width: 100%; height: 100%; object-fit: cover; border-radius: 10px;">
                </div>
              </button>
            </div>
          </div>
        
        <!-- Modal -->
        <div class="modal fade modal-xl" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel" id="bookTitle">Harry Potter e la Pietra Filosofale</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <p id="bookDetails">Harry Potter e la Pietra Filosofale, il primo capitolo della celebre saga scritta da J.K.
                  Rowling, ti invita <br> in un viaggio straordinario nel mondo incantato di Hogwarts, dove
                  ogni pagina è ricca di avventure,<br> misteri e amicizie indimenticabili.<br><br>

                  Harry, un ragazzino che vive una vita apparentemente ordinaria con i suoi antipatici zii,
                  scopre di <br> essere in realtà un mago destinato a grandi imprese. Accolto nella Scuola di
                  Magia e Stregoneria di <br> Hogwarts, si immerge in un universo di incantesimi, creature
                  magiche e segreti. Insieme ai suoi nuovi amici, <br> Hermione Granger e Ron Weasley, Harry
                  si troverà presto a confrontarsi con una misteriosa <br>pietra dai poteri straordinari e con
                  l'ombra minacciosa di un mago oscuro che non ha mai smesso di perseguitarlo.<br><br>

                  Un mix perfetto di magia, coraggio e avventura, Harry Potter e la Pietra Filosofale è una
                  lettura <br> imperdibile per chiunque voglia riscoprire il potere dell'immaginazione. Inizia
                  il viaggio che <br>ha incantato generazioni di lettori e lasciati trasportare in un mondo
                  dove tutto è possibile!<br><br>

                  Il tuo biglietto per Hogwarts ti aspetta – sei pronto a salire sull'Espresso per la magia?</p>
              </div>
              <div class="modal-footer">
                <!-- Bottoni nel modal -->
                <button class="btn btn-secondary modifica-btn" id="modalModifyBtn">Modify</button>
                <button class="btn btn-danger delete-book-btn" id="modalDeleteBtn">Delete Book</button>

              </div>
            </div>
          </div>
        </div>   
        </td>
        <td>

          <div style="margin-left: 45%;">
            <a href="/inserisci"><button style="border-radius: 100px;"><i class="fa-solid fa-plus"></i></button></a>
          </div>

        </td>
        <td>

          <div style="margin-left: 45%;">
            <a href="/inserisci"><button style="border-radius: 100px;"><i class="fa-solid fa-plus"></i></button></a>
          </div>

        </td>
        <td>

          <div style="margin-left: 45%;">
            <a href="/inserisci"><button style="border-radius: 100px;"><i class="fa-solid fa-plus"></i></button></a>
          </div>

        </td>
      </tr>
    </table>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Seleziona i riferimenti agli elementi nel modal
      const modifyButton = document.getElementById('modalModifyBtn');
      const bookDetails = document.getElementById('bookDetails');
      let isEditing = false; // Stato iniziale
  
      // Funzione per modificare il paragrafo "Dettagli del libro"
      modifyButton.addEventListener('click', function () {
        if (!isEditing) {
          // Entra in modalità modifica
          const input = document.createElement('textarea');
          input.value = bookDetails.innerText;
          bookDetails.innerHTML = ''; // Rimuove il contenuto
          bookDetails.appendChild(input);
          modifyButton.innerText = 'Save'; // Cambia testo del bottone
          isEditing = true;
        } else {
          // Salva le modifiche
          const input = bookDetails.querySelector('textarea');
          if (input) {
            bookDetails.innerText = input.value; // Aggiorna il contenuto del paragrafo
          }
          modifyButton.innerText = 'Modify'; // Cambia testo del bottone
          isEditing = false;
        }
      });
  
      // Funzione elimina all'interno del modal
      const deleteButton = document.getElementById('modalDeleteBtn');
      deleteButton.addEventListener('click', function () {
        const confirmDelete = confirm('Are you sure you want to delete this book?');
        if (confirmDelete) {
          const modalElement = document.querySelector('#exampleModal');
          const modalInstance = bootstrap.Modal.getInstance(modalElement); // Ottieni l'istanza del modal
          modalInstance.hide(); // Chiudi il modal
          const bookCard = document.querySelector('button[data-bs-target="#exampleModal"]').closest('td'); // Trova il contenitore del libro
          if (bookCard) {
            bookCard.remove(); // Elimina il libro dal DOM
          }
        }
      });
    });
  </script>
  
</body>

</html>